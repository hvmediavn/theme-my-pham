function selectOnlyThis(e){var n=document.getElementsByClassName("pick_ismain_onlyone");Array.prototype.forEach.call(n,function(e){e.checked=!1}),e.checked=!0}!function(y,a){y(document).ready(function(){var t={formatNoMatches:woocommerce_district_admin.formatNoMatches},i=loading_shipping=!1;function o(){y(".vtpost_creat_order_popup").magnificPopup({type:"ajax",modal:!0,callbacks:{ajaxContentAdded:function(){u(this.content)}}})}y("#_billing_state").select2(t),y("#_billing_city").select2(t),y("#_billing_address_2").select2(t),y("body #_billing_state").on("select2:select",function(e){y("#_billing_city option").val("");var n=e.val;n||(n=y("#_billing_state option:selected").val()),n&&!i&&(i=!0,y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"load_diagioihanhchinh",matp:n},context:this,beforeSend:function(){y("#_billing_city,#_billing_address_2").html("").select2();var e=new Option("Loading...","");y("#_billing_city, #_billing_address_2").append(e)},success:function(e){i=!1,y("#_billing_city,#_billing_address_2").html("").select2();var a=new Option("Chọn xã/phường/thị trấn","");if(y("#_billing_address_2").append(a),e.success){var n=e.data;a=new Option("Chọn quận/huyện",""),y("#_billing_city").append(a),y.each(n,function(e,n){a=new Option(n.name,n.maqh),y("#_billing_city").append(a)})}}}))}),0<y("#_billing_address_2").length&&y("#_billing_city").on("change select2:select",function(e){var n=e.val;n||(n=y("#_billing_city option:selected").val()),n&&y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"load_diagioihanhchinh",maqh:n},context:this,beforeSend:function(){y("#_billing_address_2").html("").select2();var e=new Option("Loading...","");y("#_billing_address_2").append(e)},success:function(e){if(y("#_billing_address_2").html("").select2(t),e.success){var n=e.data,a=new Option("Chọn xã/phường/thị trấn","");y("#_billing_address_2").append(a),y.each(n,function(e,n){var a=new Option(n.name,n.xaid);y("#_billing_address_2").append(a)})}}})}),y("#_shipping_state").select2(t),y("#_shipping_city").select2(t),y("#_shipping_address_2").select2(t),y("body #_shipping_state").on("select2:select",function(e){y("#_shipping_city option").val("");var n=e.val;n||(n=y("#_shipping_state option:selected").val()),n&&!loading_shipping&&(loading_shipping=!0,y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"load_diagioihanhchinh",matp:n},context:this,beforeSend:function(){y("#_shipping_city,#_shipping_address_2").html("").select2();var e=new Option("Loading...","");y("#_shipping_city, #_shipping_address_2").append(e)},success:function(e){loading_shipping=!1,y("#_shipping_city,#_shipping_address_2").html("").select2();var n=new Option("Chọn xã/phường/thị trấn","");if(y("#_shipping_address_2").append(n),e.success){var a=e.data;n=new Option("Chọn quận/huyện","");y("#_shipping_city").append(n),y.each(a,function(e,n){var a=new Option(n.name,n.maqh);y("#_shipping_city").append(a)})}}}))}),0<y("#_shipping_address_2").length&&y("#_shipping_city").on("change select2:select",function(e){var n=e.val;n||(n=y("#_shipping_city option:selected").val()),n&&y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"load_diagioihanhchinh",maqh:n},context:this,beforeSend:function(){y("#_shipping_address_2").html("").select2();var e=new Option("Loading...","");y("#_shipping_address_2").append(e)},success:function(e){if(y("#_shipping_address_2").html("").select2(t),e.success){var n=e.data,a=new Option("Chọn xã/phường/thị trấn","");y("#_shipping_address_2").append(a),y.each(n,function(e,n){var a=new Option(n.name,n.xaid);y("#_shipping_address_2").append(a)})}}})}),y("body").on("click",".vtpost_login",function(){var t=y(this).closest(".devvn_vietnam_shipping_wrap"),e=y("#vtpost_login_nonce",t).val(),n=y("#username",t).val(),a=y("#userpass",t).val();return y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"vtpost_login",username:n,userpass:a,nonce:e},context:this,beforeSend:function(){t.addClass("vnshipping_loading")},success:function(e){e.success?(alert(e.data),y("#submit",t).trigger("click")):alert(e.data),t.removeClass("vnshipping_loading")},error:function(e,n,a){t.removeClass("vnshipping_loading")}}),!1}),y(".enternosubmit").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),y("body").on("click",".vtpost_sync_hubs",function(){var t=y(this).closest(".devvn_vietnam_shipping_wrap"),e=y("#vtpost_sync_hubs_nonce",t).val();return y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"vtpost_sync_hubs",nonce:e},context:this,beforeSend:function(){t.addClass("vnshipping_loading")},success:function(e){e.success?(alert(e.data),location.reload()):alert(e.data),t.removeClass("vnshipping_loading")},error:function(e,n,a){t.removeClass("vnshipping_loading")}}),!1}),y("#type_service").on("change",function(){var s=y(this).closest(".devvn_vietnam_shipping_wrap"),e=y("#vtpost_login_nonce",s).val(),n=y(this).val();y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"vtpost_get_service",type:n,nonce:e},context:this,beforeSend:function(){s.addClass("vnshipping_loading")},success:function(e){if(e.success){var n=e.data,i=a.template("vtpost-service"),o=y(".list_all_service",s).data("choose");y(".list_all_service",s).html(""),y(n).each(function(e,a){var t="";y(o).each(function(e,n){a.SERVICE_CODE==n&&(t="checked")}),y(".list_all_service",s).append(i({name:a.SERVICE_NAME,value:a.SERVICE_CODE,checked:t}))})}else y(".list_all_service",s).html("Có lỗi xảy ra!");s.removeClass("vnshipping_loading")},error:function(e,n,a){s.removeClass("vnshipping_loading")}})}),o(),y(document).on("click",".close_popup",function(e){e.preventDefault(),y.magnificPopup.close()});var f=!1;function u(e){var n=parseFloat(y("#prod_price",e).val()||0),a=y("#order_payment option:selected",e).val(),t=parseFloat(y(".service_id:checked",e).data("price")||0),i=y("#cod_amout",e);1==a?i.val(0):2==a?i.val(n):3==a?i.val(parseFloat(n+t)):4==a&&i.val(parseFloat(t))}y("body").on("click",".devvn_vtpost_creat_order, .devvn_vtpost_update_order",function(){var t=y(this).closest(".creat_order_wrap"),e=y("#creat_order_nonce",t).val(),n=y(".order_id",t).val(),a=y("#order_hubsid",t).val(),i=y("#prod_price",t).val(),o=y("#prod_weight",t).val(),s=y("#prod_length",t).val(),r=y("#prod_width",t).val(),c=y("#prod_height",t).val(),d=y("#prod_type",t).val(),_=y("#order_payment option:selected",t).val(),p=y(".service_id:checked",t).val(),l=[];y('input[name="order_service_extra[]"]:checked',t).each(function(e){l[e]=y(this).val()});var h=y("#order_note",t).val(),v=y("#cod_amout",t).val(),u=y("#delivery_date",t).val(),g=y(".vtpost_order_number",t).val(),m="vtpost_creat_order";g&&(m="vtpost_update_order"),f||y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:m,orderid:n,hubsID:a,prod_price:i,prod_weight:o,prod_length:s,prod_width:r,prod_height:c,prod_type:d,order_payment:_,service_id:p,service_extras:l,order_note:h,cod_amout:v,delivery_date:u,order_number:g,nonce:e},context:this,beforeSend:function(){t.addClass("vnshipping_loading"),f=!0},success:function(e){e.success?(alert(e.data.mess),y.each(e.data.fragments,function(e,n){y(e).html(n)}),y.magnificPopup.close()):alert(e.data),t.removeClass("vnshipping_loading"),f=!1},error:function(e,n,a){t.removeClass("vnshipping_loading"),f=!1}})}),y("body").on("click",".vtpost_cancel_order",function(){var e=y(this).data("nonce"),n=y(this).data("orderid"),a=y(this).data("ordernumber");f||y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"vtpost_cancel_order",orderid:n,ordernumber:a,nonce:e},context:this,beforeSend:function(){y(this).addClass("vnshipping_loading"),f=!0},success:function(e){e.success?(alert(e.data.mess),y.each(e.data.fragments,function(e,n){y(e).html(n)}),o()):alert(e.data),y(this).removeClass("vnshipping_loading"),f=!1},error:function(e,n,a){y(this).removeClass("vnshipping_loading"),f=!1}})}),y("body").on("change","#order_payment, #prod_price, .service_id",function(){u(y(this).closest(".creat_order_wrap"))}),y("body").on("change","#order_hubsid, #prod_price, #order_payment, #prod_weight, #prod_length, #prod_width, #prod_height, .order_service_extra",function(){!function(t){var e=y("#creat_order_nonce",t).val(),n=y(".order_id",t).val(),a=y("#order_hubsid",t).val(),i=y("#prod_price",t).val(),o=y("#prod_weight",t).val(),s=y("#prod_length",t).val(),r=y("#prod_width",t).val(),c=y("#prod_height",t).val(),d=y("#prod_type",t).val(),_=y("#order_payment option:selected",t).val(),p=y(".service_id:checked",t).val(),l=[];y('input[name="order_service_extra[]"]:checked',t).each(function(e){l[e]=y(this).val()});var h=y("#order_note",t).val(),v=y("#cod_amout",t).val();f||y.ajax({type:"post",dataType:"json",url:woocommerce_district_admin.ajaxurl,data:{action:"creat_order_calc",orderid:n,hubsID:a,prod_price:i,prod_weight:o,prod_length:s,prod_width:r,prod_height:c,prod_type:d,order_payment:_,service_id:p,service_extras:l,order_note:h,cod_amout:v,nonce:e},context:this,beforeSend:function(){t.addClass("vnshipping_loading"),f=!0},success:function(e){e.success?y.each(e.data.fragments,function(e,n){y(e).html(n)}):alert(e.data),u(t),t.removeClass("vnshipping_loading"),f=!1},error:function(e,n,a){t.removeClass("vnshipping_loading"),f=!1}})}(y(this).closest(".creat_order_wrap"))})})}(jQuery,wp);