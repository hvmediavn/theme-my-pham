"use strict";(function(){jQuery(function(c){var _,d,t,s,r;if(c(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),"wc_order_status"!==pagenow&&"edit-wc_order_status"!==pagenow||(c.extend(!0,c.magnificPopup.defaults,{tClose:wc_order_status_manager.i18n.close}),d=c("#reassign-order-status"),_=c("#reassign-order-status-popup"),d.magnificPopup({inline:!0,callbacks:{open:function(t){return _.show()},close:function(t){return _.hide()}}}),c("a.submitdelete").on("click",function(t){var o,e,a,i;if(t.preventDefault(),i=this,"wc_order_status"===pagenow?(e=c("#post_ID").val(),a=c("#post_name").val()):(e=c(this).closest("tr").attr("id").substr(5),a=c(this).closest("tr").find("td.column-slug").text()),e)return o={action:"wc_order_status_manager_can_safely_delete_order_status",security:wc_order_status_manager.delete_order_status_nonce,status:e},c.post(wc_order_status_manager.ajax_url,o,function(e){var t,n,s,r;return e.success?window.location=c(i).attr("href"):(_.find(".order-status-link").attr("href",e.data.orders_link),_.find(".order-status-count").text(e.data.orders_count),_.find(".order-status-name").text(e.data.status_name),s=_.find(".singular"),t=_.find(".plural"),1===e.data.orders_count?(s.show(),t.hide()):(s.hide(),t.show()),n=_.find("select"),r="",n.html(" "),c.each(wc_order_status_manager.order_statuses,function(t,e){if(t!==a)return r+='<option value="'+t+'">'+e+"</option>"}),_.find("select").html(r),d.trigger("click"),_.removeClass("mfp-hide"),_.find("button").on("click",function(t){return c(this).hasClass("reassign")?(o={action:"wc_order_status_manager_bulk_reassign_order_status",security:wc_order_status_manager.bulk_reassign_order_status_nonce,old_status:e.data.status_name,new_status:_.find("select").val()},c.post(wc_order_status_manager.ajax_url,o,function(t){return window.location=c(i).attr("href")})):c(this).hasClass("delete")?window.location=c(i).attr("href"):void 0}))})})),"edit-wc_order_status"===pagenow&&((t=c("#the-list")).sortable({placeholder:"ui-state-highlight",stop:function(t,e){var n,s;return s=[],c("#the-list > tr ").each(function(){return s.push(c(this).find("td.slug").text())}),n={action:"wc_order_status_manager_sort_order_statuses",security:wc_order_status_manager.sort_order_statuses_nonce,statuses:s},c.post(wc_order_status_manager.ajax_url,n,function(t){})}}),t.disableSelection(),c("#import-custom-statuses").on("click",function(t){var e;return t.preventDefault(),e={action:"wc_order_status_manager_import_custom_order_statuses",security:wc_order_status_manager.import_custom_order_statuses_nonce},c.post(wc_order_status_manager.ajax_url,e,function(t){return location.reload()})})),"wc_order_status"===pagenow&&(c("#_next_statuses").select2(),c("#_color").wpColorPicker({change:function(t,e){return c("._icon_field .selected-icon").css("color",e.color.toString())}}),c(document).mousedown(function(t){if(!c(t.target).parents(".wp-picker-holder")&&!c(t.target).parents("mark"))return c(".wp-picker-holder").each(function(){return c(this).fadeOut()})}),r=function(t,e){var n;return n=e?"url("+e+")":"none",c(t).siblings("select").val(""),c(t).siblings(".icons-selector").find(".current-icon").removeClass("current-icon"),c(t).siblings(".icons-selector").find(".selected-icon i").removeClass().css("background-image",n)},c("#_icon, #_action_icon").each(function(){var e,t;return c(this).fontIconPicker({allCategoryText:wc_order_status_manager.i18n.all_icon_packages,source:wc_order_status_manager.icon_options}),(e=c(this).siblings(".icons-selector")).find(".fip-box:has(.fip-icon-block)").attr("title",wc_order_status_manager.i18n.remove_icon),e.find(".selector").addClass("button button-small"),c(this).on("change",function(t){if(c(this).val())return e.find(".selected-icon i").css("background-image","")}),(t=c(this).data("icon-image"))&&r(this,t),c(this).siblings(".upload-icon, .remove-icon").detach().insertAfter(c(this).siblings(".icons-selector").find(".selector"))}),c(".icons-selector .selector-button").attr("title",wc_order_status_manager.i18n.select_icon),c(".icons-search-input").attr("placeholder",wc_order_status_manager.i18n.search_icons),c("._icon_field .selected-icon").css("color",c("#_color").val()),s={},c(".upload-icon").on("click",function(t){var n;return t.preventDefault(),n=c(this).attr("href"),s[n]||(s[n]=wp.media.frames["file_frame_"+n]=wp.media({title:wc_order_status_manager.i18n.choose_file,button:{text:c(this).data("uploader-button-text")},multiple:!1}),s[n].on("select",function(t){var e;return e=s[n].state().get("selection").first().toJSON(),c(n).val(e.id),c(n).siblings(".icons-selector").find(".selected-icon i").css("background-image","").removeClass().addClass("fa fa-refresh fa-spin"),c.get(wc_order_status_manager.ajax_url,{attachment_id:e.id,action:"wc_order_status_manager_get_icon_image_url"},function(t){if(-1!==t.indexOf("http"))return r(n,t)})})),s[n].open()}),c(".remove-icon").on("click",function(t){return t.preventDefault(),r(c(this).attr("href")),c(c(this).attr("href")).val("")})),"wc_order_email"===pagenow)return c(".dispatch_conditions").on("click",".remove-condition",function(t){if(window.confirm(wc_order_status_manager.i18n.remove_this_condition)&&(c(t.target).parents("tr").remove(),!c(".dispatch_conditions tbody").children().length))return c(".dispatch_conditions tbody, .dispatch_conditions thead").hide()}),c(".dispatch_conditions").on("click",".add-condition",function(t){var e,n;return e=c(".dispatch_conditions tr.condition").length,n='<option value="any">'+wc_order_status_manager.i18n.any+"</option>",c.each(wc_order_status_manager.order_statuses,function(t,e){return n+='<option value="'+t+'">'+e+"</option>"}),c(".dispatch_conditions thead").show(),c(".dispatch_conditions tbody").show().append('<tr class="condition"><td><select name="_email_dispatch_condition['+e+'][from]">'+n+'</select></td><td><select name="_email_dispatch_condition['+e+'][to]">'+n+'</select></td><td><button type="button" class="button remove-condition">'+wc_order_status_manager.i18n.remove+"</button></td></tr>")})})}).call(void 0);